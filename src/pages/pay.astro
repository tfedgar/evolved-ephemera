---
import Layout from '../layouts/Layout.astro';
import Navigation from '../components/Navigation.astro';
---

<Layout title="Coaching Packages - Edgar Coaching" description="Choose from our coaching packages designed to transform your fitness journey with personalized training and nutrition plans.">
  <Navigation />
  <section class="py-16 lg:py-20 bg-gray-50 min-h-screen">
    <div class="max-w-7xl mx-auto px-4 lg:px-6">
      <div class="text-center mb-12">
        <a href="/" class="inline-flex items-center gap-2 mb-8 px-6 py-3 text-gray-900 no-underline font-medium text-base border-2 border-gray-900 rounded-full transition-all duration-200 hover:bg-gray-900 hover:text-white hover:-translate-y-1">
          ← Return Home
        </a>
        <h1 class="text-4xl md:text-5xl lg:text-6xl font-semibold tracking-tight m-0 mb-4 text-gray-900">
          Coaching Packages
        </h1>
        <p class="text-base md:text-lg lg:text-xl text-gray-600 m-0">
          Choose the package that fits your goals and commitment level
        </p>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8 mb-12">
        <div class="bg-white rounded-2xl p-6 lg:p-8 border-2 border-gray-900 transition-all duration-300 relative flex flex-col h-full w-full hover:border-gray-900 hover:-translate-y-1 hover:shadow-xl bg-gradient-to-br from-gray-50 to-gray-100">
          <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white px-4 py-2 rounded-full text-sm font-semibold">
            Most Popular
          </div>
          <h2 class="text-xl md:text-2xl font-semibold m-0 mb-4 tracking-tight leading-tight text-gray-900">
            6-Month Rebuild
          </h2>
          <div class="flex-grow mb-8">
            <p class="font-semibold text-gray-900 text-lg mb-4 leading-tight">
              Deep results with full support - plus bloodwork included.
            </p>
            <p class="text-gray-600 mb-6 text-base leading-relaxed">
              Six months gives us time to correct the root issues, optimize performance, and lock in lasting changes. Includes comprehensive bloodwork to guide smarter, safer decisions.
            </p>
            <ul class="my-6 p-0 list-none">
              <li class="pl-6 relative mb-3 text-gray-700 text-sm leading-relaxed">
                <span class="absolute left-0 text-green-500 font-semibold">✓</span>
                Everything in 3-month plan
              </li>
              <li class="pl-6 relative mb-3 text-gray-700 text-sm leading-relaxed">
                <span class="absolute left-0 text-green-500 font-semibold">✓</span>
                Advanced progress tracking
              </li>
              <li class="pl-6 relative mb-3 text-gray-700 text-sm leading-relaxed">
                <span class="absolute left-0 text-green-500 font-semibold">✓</span>
                1 bloodwork panel included ($500 value)
              </li>
              <li class="pl-6 relative mb-3 text-gray-700 text-sm leading-relaxed">
                <span class="absolute left-0 text-green-500 font-semibold">✓</span>
                Lifestyle coaching: stress, sleep, routines
              </li>
              <li class="pl-6 relative mb-3 text-gray-700 text-sm leading-relaxed">
                <span class="absolute left-0 text-green-500 font-semibold">✓</span>
                Intermediate cycle support and monitoring
              </li>
            </ul>
            <p class="text-gray-600 text-sm italic mt-4 p-4 bg-gray-100 rounded-lg border-l-4 border-gray-900">
              Best for: Body recomposition, energy/lifestyle reset, enhanced athletes needing data
            </p>
          </div>
          <form action="/api/create-checkout-session" method="POST" enctype="application/x-www-form-urlencoded">
            <input type="hidden" name="priceId" value="price_1RbDBHATEGp1ZwvVgHoMRXSK" />
            <button type="submit" class="w-full py-4 px-8 bg-gray-900 text-white rounded-xl text-base font-bold border-none cursor-pointer transition-all duration-200 hover:bg-gray-800 hover:-translate-y-1 mt-auto shadow-lg">
              Get Started
            </button>
          </form>
        </div>

        <div class="bg-white rounded-2xl p-6 lg:p-8 border-2 border-gray-200 transition-all duration-300 relative flex flex-col h-full w-full hover:border-gray-900 hover:-translate-y-1 hover:shadow-xl">
          <h2 class="text-xl md:text-2xl font-semibold m-0 mb-4 tracking-tight leading-tight text-gray-900">
            3-Month Kickstart
          </h2>
          <div class="flex-grow mb-8">
            <p class="font-semibold text-gray-900 text-lg mb-4 leading-tight">
              A strong start for serious change.
            </p>
            <p class="text-gray-600 mb-6 text-base leading-relaxed">
              Build momentum with a full reset of your training, nutrition, recovery, and lifestyle. Perfect if you're ready to get results fast and want structure without fluff.
            </p>
            <ul class="my-6 p-0 list-none">
              <li class="pl-6 relative mb-3 text-gray-700 text-sm leading-relaxed">
                <span class="absolute left-0 text-green-500 font-semibold">✓</span>
                Customized training and nutrition plan
              </li>
              <li class="pl-6 relative mb-3 text-gray-700 text-sm leading-relaxed">
                <span class="absolute left-0 text-green-500 font-semibold">✓</span>
                Weekly check-ins and adjustments
              </li>
              <li class="pl-6 relative mb-3 text-gray-700 text-sm leading-relaxed">
                <span class="absolute left-0 text-green-500 font-semibold">✓</span>
                Direct coach access and ongoing support
              </li>
              <li class="pl-6 relative mb-3 text-gray-700 text-sm leading-relaxed">
                <span class="absolute left-0 text-green-500 font-semibold">✓</span>
                Performance tracking and accountability
              </li>
              <li class="pl-6 relative mb-3 text-gray-700 text-sm leading-relaxed">
                <span class="absolute left-0 text-green-500 font-semibold">✓</span>
                Basic cycle guidance and support
              </li>
            </ul>
            <p class="text-gray-600 text-sm italic mt-4 p-4 bg-gray-100 rounded-lg border-l-4 border-gray-900">
              Best for: Getting unstuck, dialing in habits, and seeing visible progress
            </p>
          </div>
          <form action="/api/create-checkout-session" method="POST" enctype="application/x-www-form-urlencoded">
            <input type="hidden" name="priceId" value="price_1Rbtt9ATEGp1ZwvV8o8VBAWW" />
            <button type="submit" class="w-full py-4 px-8 bg-transparent text-gray-900 border-2 border-gray-900 rounded-xl text-base font-bold cursor-pointer transition-all duration-200 hover:bg-gray-900 hover:text-white hover:-translate-y-1 mt-auto">
              Get Started
            </button>
          </form>
        </div>

        <div class="bg-white rounded-2xl p-6 lg:p-8 border-2 border-gray-200 transition-all duration-300 relative flex flex-col h-full w-full hover:border-gray-900 hover:-translate-y-1 hover:shadow-xl">
          <h2 class="text-xl md:text-2xl font-semibold m-0 mb-4 tracking-tight leading-tight text-gray-900">
            12-Month Transformation
          </h2>
          <div class="flex-grow mb-8">
            <p class="font-semibold text-gray-900 text-lg mb-4 leading-tight">
              All-in commitment. Maximum value.
            </p>
            <p class="text-gray-600 mb-6 text-base leading-relaxed">
              This package is built for men ready to fully transform their body, health, and mindset - with the long-term coaching, tools, and data to back it up.
            </p>
            <ul class="my-6 p-0 list-none">
              <li class="pl-6 relative mb-3 text-gray-700 text-sm leading-relaxed">
                <span class="absolute left-0 text-green-500 font-semibold">✓</span>
                Everything in the 6-month plan
              </li>
              <li class="pl-6 relative mb-3 text-gray-700 text-sm leading-relaxed">
                <span class="absolute left-0 text-green-500 font-semibold">✓</span>
                1 month of coaching FREE
              </li>
              <li class="pl-6 relative mb-3 text-gray-700 text-sm leading-relaxed">
                <span class="absolute left-0 text-green-500 font-semibold">✓</span>
                1 bloodwork panel included ($500 value)
              </li>
              <li class="pl-6 relative mb-3 text-gray-700 text-sm leading-relaxed">
                <span class="absolute left-0 text-green-500 font-semibold">✓</span>
                Special discount on total plan cost
              </li>
              <li class="pl-6 relative mb-3 text-gray-700 text-sm leading-relaxed">
                <span class="absolute left-0 text-green-500 font-semibold">✓</span>
                Long-term strategy, goal cycling, and lifestyle mastery
              </li>
              <li class="pl-6 relative mb-3 text-gray-700 text-sm leading-relaxed">
                <span class="absolute left-0 text-green-500 font-semibold">✓</span>
                Advanced cycle support and year-long optimization
              </li>
            </ul>
            <p class="text-gray-600 text-sm italic mt-4 p-4 bg-gray-100 rounded-lg border-l-4 border-gray-900">
              Ideal for: Complete lifestyle overhauls, body recomposition, enhanced or high-performing clients who want full-spectrum support
            </p>
          </div>
          <form action="/api/create-checkout-session" method="POST" enctype="application/x-www-form-urlencoded">
            <input type="hidden" name="priceId" value="price_1Rn5OMATEGp1ZwvV1n7orP1E" />
            <button type="submit" class="w-full py-4 px-8 bg-transparent text-gray-900 border-2 border-gray-900 rounded-xl text-base font-bold cursor-pointer transition-all duration-200 hover:bg-gray-900 hover:text-white hover:-translate-y-1 mt-auto">
              Get Started
            </button>
          </form>
        </div>

        <div class="bg-white rounded-2xl p-6 lg:p-8 border-2 border-gray-200 transition-all duration-300 relative flex flex-col h-full w-full hover:border-gray-900 hover:-translate-y-1 hover:shadow-xl">
          <h2 class="text-xl md:text-2xl font-semibold m-0 mb-4 tracking-tight leading-tight text-gray-900">
            6-Month Enhanced Support
          </h2>
          <div class="flex-grow mb-8">
            <p class="font-semibold text-gray-900 text-lg mb-4 leading-tight">
              Deep results with full support - plus premium cycle optimization.
            </p>
            <p class="text-gray-600 mb-6 text-base leading-relaxed">
              Six months of dedicated coaching with our most comprehensive cycle support package. Includes advanced bloodwork analysis, specialized protocols, and expert cycle optimization.
            </p>
            <ul class="my-6 p-0 list-none">
              <li class="pl-6 relative mb-3 text-gray-700 text-sm leading-relaxed">
                <span class="absolute left-0 text-green-500 font-semibold">✓</span>
                Everything in 6-month plan
              </li>
              <li class="pl-6 relative mb-3 text-gray-700 text-sm leading-relaxed">
                <span class="absolute left-0 text-green-500 font-semibold">✓</span>
                Premium cycle support and monitoring
              </li>
              <li class="pl-6 relative mb-3 text-gray-700 text-sm leading-relaxed">
                <span class="absolute left-0 text-green-500 font-semibold">✓</span>
                Advanced cycle protocols and adjustments
              </li>
              <li class="pl-6 relative mb-3 text-gray-700 text-sm leading-relaxed">
                <span class="absolute left-0 text-green-500 font-semibold">✓</span>
                Specialized ancillary guidance
              </li>
              <li class="pl-6 relative mb-3 text-gray-700 text-sm leading-relaxed">
                <span class="absolute left-0 text-green-500 font-semibold">✓</span>
                1 bloodwork panel included ($500 value)
              </li>
              <li class="pl-6 relative mb-3 text-gray-700 text-sm leading-relaxed">
                <span class="absolute left-0 text-green-500 font-semibold">✓</span>
                Priority support response
              </li>
            </ul>
            <p class="text-gray-600 text-sm italic mt-4 p-4 bg-gray-100 rounded-lg border-l-4 border-gray-900">
              Best for: People just starting enhancement and want extra guidance and services
            </p>
          </div>
          <form action="/api/create-checkout-session" method="POST" enctype="application/x-www-form-urlencoded">
            <input type="hidden" name="priceId" value="price_1RnN54ATEGp1ZwvVGu1A4lA6" />
            <button type="submit" class="w-full py-4 px-8 bg-transparent text-gray-900 border-2 border-gray-900 rounded-xl text-base font-bold cursor-pointer transition-all duration-200 hover:bg-gray-900 hover:text-white hover:-translate-y-1 mt-auto">
              Get Started
            </button>
          </form>
        </div>

        <div class="bg-white rounded-2xl p-6 lg:p-8 border-2 border-gray-200 transition-all duration-300 relative flex flex-col h-full w-full hover:border-gray-900 hover:-translate-y-1 hover:shadow-xl md:col-span-2 lg:col-span-1 lg:col-start-2">
          <h2 class="text-xl md:text-2xl font-semibold m-0 mb-4 tracking-tight leading-tight text-gray-900">
            60 Minute Consultation Call
          </h2>
          <div class="flex-grow mb-8">
            <p class="text-gray-600 mb-6 text-base leading-relaxed">
              One-on-one strategy session to discuss your goals and create a personalized plan. Perfect for getting clarity before committing to a full program.
            </p>
            <ul class="my-6 p-0 list-none">
              <li class="pl-6 relative mb-3 text-gray-700 text-sm leading-relaxed">
                <span class="absolute left-0 text-green-500 font-semibold">✓</span>
                Comprehensive goal assessment
              </li>
              <li class="pl-6 relative mb-3 text-gray-700 text-sm leading-relaxed">
                <span class="absolute left-0 text-green-500 font-semibold">✓</span>
                Personalized strategy recommendations
              </li>
              <li class="pl-6 relative mb-3 text-gray-700 text-sm leading-relaxed">
                <span class="absolute left-0 text-green-500 font-semibold">✓</span>
                Q&A with expert coach
              </li>
              <li class="pl-6 relative mb-3 text-gray-700 text-sm leading-relaxed">
                <span class="absolute left-0 text-green-500 font-semibold">✓</span>
                Next steps roadmap
              </li>
            </ul>
          </div>
          <form action="/api/create-checkout-session" method="POST" enctype="application/x-www-form-urlencoded">
            <input type="hidden" name="priceId" value="price_1RJdKzATEGp1ZwvVjD6RRjZ5" />
            <button type="submit" class="w-full py-4 px-8 bg-blue-600 text-white rounded-xl text-base font-bold border-none cursor-pointer transition-all duration-200 hover:bg-blue-700 hover:-translate-y-1 mt-auto shadow-lg">
              Book Call
            </button>
          </form>
        </div>
      </div>
      
      <div class="text-center py-8 px-8 bg-gray-100 rounded-2xl border border-gray-200">
        <p class="m-2 text-gray-600 text-sm">✓ 30-day satisfaction guarantee on all coaching packages</p>
        <p class="m-2 text-gray-600 text-sm">✓ Secure payment processing via Stripe</p>
      </div>
    </div>
  </section>
</Layout>

<script>
  // Handle payment form submissions with error handling
  document.addEventListener('DOMContentLoaded', function() {
    const forms = document.querySelectorAll('form[action="/api/create-checkout-session"]');
    
    forms.forEach(form => {
      form.addEventListener('submit', function(e) {
        const button = form.querySelector('button[type="submit"]') as HTMLButtonElement;
        
        // Show loading state
        if (button) {
          button.textContent = 'Processing...';
          button.disabled = true;
        }
        
        // Let the form submit normally - don't prevent default
        // This allows the browser to handle the 303 redirect properly
      });
    });
    
    // Function to show error messages
    function showErrorMessage(message: string) {
      // Remove existing error messages
      const existingError = document.querySelector('.payment-error');
      if (existingError) {
        existingError.remove();
      }
      
      // Create error message element
      const errorDiv = document.createElement('div');
      errorDiv.className = 'payment-error';
      errorDiv.innerHTML = `
        <div class="bg-red-50 border border-red-200 text-red-800 p-4 rounded-lg my-4 text-center">
          <strong>Payment Error:</strong> ${message}
          <br><small>Please contact support if this issue persists.</small>
        </div>
      `;
      
      // Insert error message at the top of the packages section
      const packagesSection = document.querySelector('.grid');
      if (packagesSection) {
        packagesSection.parentNode?.insertBefore(errorDiv, packagesSection);
      }
      
      // Auto-remove error after 10 seconds
      setTimeout(() => {
        errorDiv.remove();
      }, 10000);
    }
    
    // Check for success/cancel URL parameters
    const urlParams = new URLSearchParams(window.location.search);
    if (urlParams.get('success') === 'true') {
      showSuccessMessage('Payment successful! You will receive confirmation details shortly.');
    } else if (urlParams.get('canceled') === 'true') {
      showErrorMessage('Payment was canceled. You can try again anytime.');
    }
    
    function showSuccessMessage(message: string) {
      const successDiv = document.createElement('div');
      successDiv.innerHTML = `
        <div class="bg-green-50 border border-green-200 text-green-800 p-4 rounded-lg my-4 text-center">
          <strong>Success!</strong> ${message}
        </div>
      `;
      
      const packagesSection = document.querySelector('.grid');
      if (packagesSection) {
        packagesSection.parentNode?.insertBefore(successDiv, packagesSection);
      }
    }
  });
</script> 
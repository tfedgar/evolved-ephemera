---
// Component frontmatter
---

<div id="cookie-consent" class="fixed bottom-0 left-0 right-0 bg-black/95 backdrop-blur-md text-white p-4 z-50" style="display: none;">
  <div class="max-w-6xl mx-auto flex flex-col lg:flex-row gap-4 items-center justify-center">
    <p class="text-sm lg:text-base leading-relaxed text-center lg:text-left">
      We use essential cookies to enhance your experience. By continuing to visit this site you agree to our use of cookies. 
      <a href="/privacy" class="text-white underline hover:text-gray-300 transition-colors">Privacy Policy</a>
    </p>
    <div class="flex flex-col sm:flex-row gap-3 lg:gap-4 flex-shrink-0">
      <button id="accept-cookies" class="px-4 py-2 bg-white text-black border-none rounded font-medium transition-opacity hover:opacity-90 text-sm lg:text-base">
        Accept Essential Cookies
      </button>
      <button id="reject-cookies" class="px-4 py-2 bg-transparent text-white border border-white rounded font-medium transition-opacity hover:opacity-90 text-sm lg:text-base">
        Reject Non-Essential
      </button>
    </div>
  </div>
</div>

<script>
  // Cookie consent functionality
  const cookieBanner = document.getElementById('cookie-consent') as HTMLElement;
  const acceptButton = document.getElementById('accept-cookies');
  const rejectButton = document.getElementById('reject-cookies');

  function setCookie(name: string, value: string, days: number): void {
    const date = new Date();
    date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
    document.cookie = `${name}=${encodeURIComponent(value)};expires=${date.toUTCString()};path=/;SameSite=Strict;Secure`;
  }

  function getCookie(name: string): string | null {
    const nameEQ = name + "=";
    const ca = document.cookie.split(';');
    for(let c of ca) {
      while (c.charAt(0) === ' ') c = c.substring(1, c.length);
      if (c.indexOf(nameEQ) === 0) return decodeURIComponent(c.substring(nameEQ.length, c.length));
    }
    return null;
  }

  function showCookieBanner(): void {
    if (cookieBanner) cookieBanner.style.display = 'block';
  }

  function hideCookieBanner(): void {
    if (cookieBanner) cookieBanner.style.display = 'none';
  }

  // Check for existing consent
  if (!getCookie('cookie-consent')) {
    showCookieBanner();
  }

  // Handle accept
  acceptButton?.addEventListener('click', () => {
    setCookie('cookie-consent', 'accepted', 365);
    hideCookieBanner();
  });

  // Handle reject
  rejectButton?.addEventListener('click', () => {
    setCookie('cookie-consent', 'rejected', 365);
    hideCookieBanner();
  });
</script> 